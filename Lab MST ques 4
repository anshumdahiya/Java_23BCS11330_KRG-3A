import java.util.*;
class ProductNotFoundException extends Exception {
    public ProductNotFoundException(String msg) { super(msg); }
}

public class ProductDiscount {
    private HashMap<String, Double> products = new HashMap<>();

    public void addProduct(String id, double price) {
        products.put(id, price);
    }

    public void applyDiscount(String id, double percent) throws ProductNotFoundException {
        if (!products.containsKey(id)) throw new ProductNotFoundException("Error: Product ID not found!");
        if (percent < 0 || percent > 100) throw new IllegalArgumentException("Error: Discount percentage must be between 0 and 100!");
        double newPrice = products.get(id) * (1 - percent / 100);
        products.put(id, newPrice);
        System.out.println("New price for " + id + ": $" + newPrice);
    }

    public static void main(String[] args) {
        ProductDiscount pd = new ProductDiscount();
        pd.addProduct("P001", 50.0);
        pd.addProduct("P002", 100.0);
        System.out.println("Adding products: P001=$50.0, P002=$100.0");

        try { 
            System.out.println("Applying 20% discount to P001...");
            pd.applyDiscount("P001", 20); 
        } catch (Exception e) { System.out.println(e.getMessage()); }

        try { 
            System.out.println("Applying 150% discount to P002...");
            pd.applyDiscount("P002", 150); 
        } catch (Exception e) { System.out.println(e.getMessage()); }

        try { 
            System.out.println("Applying discount to P999...");
            pd.applyDiscount("P999", 10); 
        } catch (Exception e) { System.out.println(e.getMessage()); }
    }
}
